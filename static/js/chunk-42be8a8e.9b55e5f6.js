(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-42be8a8e"],{"13d5":function(e,t,a){"use strict";var n=a("23e7"),o=a("d58f").left,r=a("a640"),i=a("ae40"),s=r("reduce"),c=i("reduce",{1:0});n({target:"Array",proto:!0,forced:!s||!c},{reduce:function(e){return o(this,e,arguments.length,arguments.length>1?arguments[1]:void 0)}})},"2b65":function(e,t,a){},3521:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"standard-table"},[a("div",{staticClass:"alert"},[e.selectedRows?a("a-alert",{attrs:{type:"info","show-icon":!0}},[a("div",{staticClass:"message",attrs:{slot:"message"},slot:"message"},[e._v(" 已选择 "),a("a",[e._v(e._s(e.selectedRows.length))]),e._v(" 项 "),a("a",{staticClass:"clear",on:{click:e.onClear}},[e._v("清空")]),e._l(e.needTotalList,(function(t,n){return[t.needTotal?a("div",{key:n},[e._v(" "+e._s(t.title)+"总计 "),a("a",[e._v(e._s(t.customRender?t.customRender(t.total):t.total))])]):e._e()]}))],2)]):e._e()],1),a("a-table",{attrs:{size:e.size,bordered:e.bordered,loading:e.loading,columns:e.columns,dataSource:e.dataSource,rowKey:e.rowKey,pagination:e.pagination,scroll:e.scroll,expandedRowKeys:e.expandedRowKeys,expandedRowRender:e.expandedRowRender,rowSelection:e.selectedRows?{selectedRowKeys:e.selectedRowKeys,onChange:e.updateSelect}:void 0},on:{change:e.onChange},scopedSlots:e._u([e._l(Object.keys(e.$scopedSlots).filter((function(e){return"expandedRowRender"!==e})),(function(t){return{key:t,fn:function(a,n,o){return[e._t(t,null,null,{text:a,record:n,index:o})]}}})),{key:e.$scopedSlots.expandedRowRender?"expandedRowRender":"",fn:function(t,a,n,o){return[e._t(e.$scopedSlots.expandedRowRender?"expandedRowRender":"",null,null,{record:t,index:a,indent:n,expanded:o})]}}],null,!0)},[e._l(Object.keys(e.$slots),(function(t){return a("template",{slot:t},[e._t(t)],2)}))],2)],1)},o=[],r=a("7644"),i=r["a"],s=(a("d835"),a("0c7c")),c=Object(s["a"])(i,n,o,!1,null,"8ea1aaf8",null);t["a"]=c.exports},"37a0":function(e,t){e.exports={messages:{CN:{inputKeywordsPlaceholder:"关键字[性别/名称/Email]",search:"查询",create:"新建",sort:"序号",name:"姓名",userCode:"账号",adUser:"域账号",status:"状态",createDate:"创建时间",updateDate:"更新时间",updateBy:"更新者",action:"操作",edit:"编辑",frozen:"冻结"},HK:{inputKeywordsPlaceholder:"关键字[性别/名称/Email]",search:"查询",create:"新建",sort:"序号",name:"姓名",userCode:"账号",adUser:"域账号",status:"状态",createDate:"创建时间",updateDate:"更新时间",updateBy:"更新者",action:"操作",edit:"编辑",frozen:"冻结"},US:{inputKeywordsPlaceholder:"Keywords[First/Last/Email]",search:"Search",create:"Create",sort:"Sort",name:"Name",userCode:"Login code",adUser:"AD User",status:"Status",createDate:"Create date",updateDate:"Changed date",updateBy:"Changed by",action:"Operation",edit:"Edit",frozen:"Frozen"}}}},"6fba":function(e,t,a){},7644:function(module,__webpack_exports__,__webpack_require__){"use strict";var core_js_modules_es_array_filter__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("4de4"),core_js_modules_es_array_filter__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(core_js_modules_es_array_filter__WEBPACK_IMPORTED_MODULE_0__),core_js_modules_es_array_map__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("d81d"),core_js_modules_es_array_map__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(core_js_modules_es_array_map__WEBPACK_IMPORTED_MODULE_1__),core_js_modules_es_array_reduce__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("13d5"),core_js_modules_es_array_reduce__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(core_js_modules_es_array_reduce__WEBPACK_IMPORTED_MODULE_2__),H_cxci_atshe_b_web_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("5530");__webpack_exports__["a"]={name:"StandardTable",props:{bordered:Boolean,loading:[Boolean,Object],columns:Array,dataSource:Array,rowKey:{type:[String,Function],default:"key"},size:{type:[String],default:"default"},pagination:{type:[Object,Boolean],default:!0},scroll:Object,selectedRows:Array,expandedRowKeys:Array,expandedRowRender:Function},data:function(){return{needTotalList:[]}},methods:{updateSelect:function(e,t){this.$emit("update:selectedRows",t),this.$emit("selectedRowChange",e,t)},initTotalList:function(e){var t=e.filter((function(e){return e.needTotal})).map((function(e){return Object(H_cxci_atshe_b_web_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_3__["a"])(Object(H_cxci_atshe_b_web_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_3__["a"])({},e),{},{total:0})}));return t},onClear:function(){this.updateSelect([],[]),this.$emit("clear")},onChange:function(e,t,a,n){var o=n.currentDataSource;this.$emit("change",e,t,a,{currentDataSource:o})}},created:function(){this.needTotalList=this.initTotalList(this.columns)},watch:{selectedRows:function selectedRows(_selectedRows){this.needTotalList=this.needTotalList.map((function(item){return Object(H_cxci_atshe_b_web_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_3__["a"])(Object(H_cxci_atshe_b_web_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_3__["a"])({},item),{},{total:_selectedRows.reduce((function(sum,val){var v;try{v=val[item.dataIndex]?val[item.dataIndex]:eval("val.".concat(item.dataIndex))}catch(_){v=val[item.dataIndex]}return v=isNaN(parseFloat(v))?0:parseFloat(v),sum+v}),0)})}))}},computed:{selectedRowKeys:function(){var e=this;return this.selectedRows.map((function(t){return"function"===typeof e.rowKey?e.rowKey(t):t[e.rowKey]}))}}}},"9f02":function(e,t,a){"use strict";var n=a("2b65"),o=a.n(n);o.a},d58f:function(e,t,a){var n=a("1c0b"),o=a("7b0b"),r=a("44ad"),i=a("50c4"),s=function(e){return function(t,a,s,c){n(a);var d=o(t),l=r(d),u=i(d.length),_=e?u-1:0,h=e?-1:1;if(s<2)while(1){if(_ in l){c=l[_],_+=h;break}if(_+=h,e?_<0:u<=_)throw TypeError("Reduce of empty array with no initial value")}for(;e?_>=0:u>_;_+=h)_ in l&&(c=a(c,l[_],_,d));return c}};e.exports={left:s(!1),right:s(!0)}},d835:function(e,t,a){"use strict";var n=a("6fba"),o=a.n(n);o.a},ee4a:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-card",[a("div",[a("a-row",{attrs:{gutter:[24,8]}},[a("a-col",{attrs:{span:6}},[a("a-input",{attrs:{allowClear:"",placeholder:e.$t("inputKeywordsPlaceholder")},model:{value:e.query.keywords,callback:function(t){e.$set(e.query,"keywords",t)},expression:"query.keywords"}})],1),a("a-col",{attrs:{md:2,sm:2}},[a("a-button",{attrs:{type:"primary",loading:e.loading},on:{click:e.handleSearch}},[a("a-icon",{attrs:{type:"search"}}),e._v(e._s(e.$t("search")))],1)],1),a("a-col",{attrs:{md:2,sm:2}},[a("a-button",{attrs:{type:"primary",loading:e.loading,disabled:""},on:{click:e.handleAdd}},[e._v(" "+e._s(e.$t("create"))+" ")])],1)],1)],1),a("div",[a("a-space",{staticClass:"operator"},[a("a-modal",{attrs:{title:e.winTitle,"on-ok":"handleSubmit"},model:{value:e.showForm,callback:function(t){e.showForm=t},expression:"showForm"}},[a("template",{slot:"footer"},[a("a-button",{key:"back",attrs:{loading:e.loading},on:{click:function(){e.showForm=!1}}},[e._v(" 取消 ")]),a("a-button",{key:"submit",attrs:{type:"primary",loading:e.loading},on:{click:e.handleSubmit}},[e._v(" 提交 ")])],1),a("a-input",{attrs:{placeholder:"标题","allow-clear":""},model:{value:e.formBody.title,callback:function(t){e.$set(e.formBody,"title",t)},expression:"formBody.title"}}),a("a-upload",{attrs:{action:"",customRequest:e.handleCustomRequest,"file-list":e.fileList,remove:e.handleRemove}},[a("a-button",{attrs:{loading:e.loading}},[a("a-icon",{attrs:{type:"upload"}}),e._v(" 上传 ")],1)],1)],2)],1),a("standard-table",{attrs:{loading:e.loading,columns:e.columns,dataSource:e.list,pagination:e.pagination,rowKey:"id"},on:{change:e.onChange,selectedRowChange:e.onSelectChange},scopedSlots:e._u([{key:"action",fn:function(t){t.text;var n=t.record;return a("div",{},[a("a",{staticStyle:{"margin-right":"8px"},attrs:{disabled:""},on:{click:function(){return e.handleEdit(n)}}},[a("a-icon",{attrs:{type:"edit"}}),e._v(" "+e._s(e.$t("edit"))+" ")],1),a("a",{attrs:{disabled:""},on:{click:function(t){return e.handleFrozen(n.id)}}},[a("a-icon",{attrs:{type:"twitter"}}),e._v(e._s(e.$t("frozen"))+" ")],1)])}}])})],1)])},o=[],r=(a("99af"),a("4de4"),a("c740"),a("d81d"),a("a434"),a("d3b7"),a("2909")),i=(a("96cf"),a("1da1")),s=a("5530"),c=a("3521"),d=a("2f62"),l=a("0f9a"),u={name:"UserList",components:{StandardTable:c["a"]},i18n:a("37a0"),data:function(){return{advanced:!0,columns:[],dataSource:[],selectedRows:[],formBody:new l["a"],showForm:!1,fileList:[],winTitle:"",winTitle1:"Add",winTitle2:"Update",query:{keywords:""}}},watch:{lang:function(){this.initColumns()}},authorize:{deleteRecord:"delete"},computed:Object(s["a"])(Object(s["a"])(Object(s["a"])({},Object(d["e"])("user",["pagination","list","loading"])),Object(d["c"])("setting",["lang"])),{},{downloadPath:function(){return this.$downloadPath}}),methods:Object(s["a"])(Object(s["a"])(Object(s["a"])({},Object(d["b"])("file",["uploadFile"])),Object(d["b"])("user",["getList","save","update","del"])),{},{test:function(e){},initColumns:function(){var e=this;this.columns=[{title:this.$t("sort"),width:80,align:"center",customRender:function(e,t,a){return"".concat(a+1)}},{title:this.$t("name"),dataIndex:"userName",align:"center",width:150,customRender:function(t,a,n){return"".concat("US"===e.lang?a["firstName"]+" "+a["lastName"]:a["lastName"]+", "+a["firstName"])}},{title:this.$t("userCode"),dataIndex:"userCode",align:"center",width:150},{title:this.$t("adUser"),dataIndex:"adUser",align:"center",width:150},{title:this.$t("status"),dataIndex:"status",width:120,align:"center",customRender:function(t,a,n){return"".concat(e.$map("userStatusEnum",a["status"]))}},{title:this.$t("createDate"),dataIndex:"createDate",sorter:!0,align:"center",width:120},{title:this.$t("updateDate"),dataIndex:"updateDate",sorter:!0,align:"center",width:120},{title:this.$t("updateBy"),dataIndex:"updateBy",sorter:!0,align:"center",width:120,customRender:function(t,a,n){return"".concat(e.$userMap(t))}},{title:this.$t("action"),align:"center",scopedSlots:{customRender:"action"},width:150}]},initFiles:function(){var e=1;this.fileList=this.formBody.fileList.map((function(t){return{uid:"upload-"+e++,name:t.fileName,status:"done",url:t.filePath}}))},handleSearch:function(){var e=this.query;this.getList(e)},handleAdd:function(){this.formBody=new l["a"],this.showForm=!0,this.winTitle=this.winTitle1},handleEdit:function(e){this.formBody=Object(s["a"])({},e),this.initFiles(),this.showForm=!0,this.winTitle=this.winTitle2},handleRemove:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var n,o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:n=e.uid,o=e.url,t.fileList.splice(t.fileList.findIndex((function(e){return e.uid===n})),1),t.formBody.fileList.splice(t.formBody.fileList.findIndex((function(e){return e.url=o})),1);case 4:case"end":return a.stop()}}),a)})))()},handleCustomRequest:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var n,o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:t.currentLoading=!0,n=new FormData,o=e.file,n.append("file",o),t.uploadFile(n).then((function(e){var a=e.fileName,n=e.filePath,o=t.formBody.fileList;o.splice(o.length,0,{fileName:a,filePath:n}),t.formBody=Object.assign({},t.formBody,{fileList:o}),t.$nextTick((function(){var e=t.fileList.length+1;t.fileList=[].concat(Object(r["a"])(t.fileList),[{uid:"upload-"+e,name:a,status:"done",url:n}])}))})).catch((function(e){})).finally((function(){t.currentLoading=!1}));case 5:case"end":return a.stop()}}),a)})))()},deleteRecord:function(e){this.dataSource=this.dataSource.filter((function(t){return t.key!==e})),this.selectedRows=this.selectedRows.filter((function(t){return t.key!==e}))},toggleAdvanced:function(){this.advanced=!this.advanced},remove:function(){var e=this;this.dataSource=this.dataSource.filter((function(t){return-1===e.selectedRows.findIndex((function(e){return e.key===t.key}))})),this.selectedRows=[]},onClear:function(){this.$message.info("您清空了勾选的所有行")},onStatusTitleClick:function(){this.$message.info("你点击了状态栏表头")},onChange:function(e,t,a,n){n.currentDataSource;this.query=Object.assign({},this.query,{current:e.current,size:e.pageSize}),this.handleSearch()},onSelectChange:function(){this.$message.info("选中行改变了")},addNew:function(){this.dataSource.unshift({key:this.dataSource.length,no:"NO "+this.dataSource.length,description:"这是一段描述",callNo:Math.floor(1e3*Math.random()),status:Math.floor(10*Math.random())%4,updatedAt:"2018-07-26"})},handleMenuClick:function(e){"delete"===e.key&&this.remove()},handleSubmit:function(){var e=this;this.formBody.id?this.handleUpdate():this.save(this.formBody).then((function(){e.$message.info("Saved successfully."),e.handleSearch(),e.showForm=!1}))},handleUpdate:function(){var e=this;this.update(this.formBody).then((function(){e.$message.info("Updated successfully."),e.handleSearch()}))},handleFrozen:function(e){var t=this;this.$confirm({title:"Do you want to delete these items?",content:"When clicked the OK button, this dialog will be closed after 1 second",onOk:function(){return new Promise((function(a,n){t.del(e).then((function(){t.handleSearch(),a()})).catch((function(e){n(e)}))})).catch((function(){}))},onCancel:function(){}})}}),created:function(){this.initColumns(),this.handleSearch()}},_=u,h=(a("9f02"),a("0c7c")),f=Object(h["a"])(_,n,o,!1,null,"2794ed21",null),m=f.exports;t["default"]=m}}]);